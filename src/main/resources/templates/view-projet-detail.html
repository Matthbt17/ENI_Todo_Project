<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org"
	data-th-replace="~{layouts/layout :: main-layout-nofooter(head=~{:: #moncss}, titre=~{:: title}, main=~{:: main})}">
<title>ENI PROJET</title>
<th:block id="moncss">
	<link rel="stylesheet" data-th-href="@{/css/tache.css}">
</th:block>
<body>
	<main id="mainFormBlock">
		<div id="container-tache">
			<div id="cardsContainertasks">
				<button id="showFormBtn">+</button>
				<div class="cardstasks">
					<h2 data-th-text="'Détails du projet : '+${projet.titre}"></h2>
					<hr>
					<div data-th-if="${#lists.isEmpty(registeredTasks)}"
						data-th-text="'YA RIEN CA REND FOU'"></div>
					<div id="task-container">
						<th:block data-th-if="${not #lists.isEmpty(registeredTasks)}"
							data-th-each="tache : ${registeredTasks}">
							<div data-th-if="${!tache.isComplete}" class="divtasks">
								<span data-th-text="${tache.titre}"></span> <span
									data-th-text="'Priorité : '+${tache.statutDePriorite}"></span>
								<span data-th-text="'Deadline : '+${tache.dateDeFin}"></span> <a
									data-th-href="@{/projet/detail/tache(id=${tache.id})}"><button>Archiver</button></a>
								<th:block data-th-if="${!#strings.isEmpty(tache.description)}">
									<img src="/images/info.png" class="infobulle" draggable="false">
									<p class="infobulleText" data-th-text="${tache.description}"></p>
								</th:block>
							</div>
						</th:block>
						<h2>Tâches archivées</h2>
						<th:block data-th-if="${not #lists.isEmpty(registeredTasks)}"
							data-th-each="tache : ${registeredTasks}">
							<th:block data-th-if="${tache.isComplete}">
								<div class="divtasks">
									<span data-th-text="${tache.titre}"></span> <span
										data-th-text="'Priorité : '+${tache.statutDePriorite}"></span>
									<span data-th-text="'Deadline : '+${tache.dateDeFin}"></span> <a
										data-th-href="@{/projet/detail/tache/unarchive(id=${tache.id})}"><button>Désarchiver</button></a>
									<th:block data-th-if="${!#strings.isEmpty(tache.description)}">
										<img src="/images/info.png" class="infobulle"
											draggable="false">
										<p class="infobulleText" data-th-text="${tache.description}"></p>
									</th:block>
								</div>
							</th:block>
						</th:block>
					</div>
				</div>
			</div>
			<div class="linetasks" id="borderForm">
				<h2 id="addTaskText">Ajouter une tâche ?</h2>
				<form data-th-action="@{/projet/detail(id=${projet.id})}"
					data-th-object="${tache}" method="post" id="formtache">
					<label for="inputTitre"></label> <input type="text"
						name="inputTitre" id="inputTitreTache" data-th-field="*{titre}"
						placeholder="Titre de la tâche"> <label
						for="inputPriorite"></label> <select name="inputPriorite"
						id="inputPriorite" data-th-field="*{statutDePriorite}">
						<option value="123456789" selected>Niveau de priorité</option>
						<option value="1">1</option>
						<option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5</option>
					</select> <label for="inputDateDeFin"></label> <input type="date"
						min="2024/07/16" max="2029/07/16" name="inputDateDeFin"
						id="inputDateDeFin" data-th-field="*{dateDeFin}">
					<textarea name="description" id="description"
						data-th-field="*{description}"
						placeholder="Description de votre tâche (optionnel)"></textarea>
					<button type="submit" class="buttontache">Ajouter la tâche</button>
				</form>
			</div>
		</div>
		<script data-th-src="@{/css/tache.js}"></script>

	</main>
</body>
</html>

